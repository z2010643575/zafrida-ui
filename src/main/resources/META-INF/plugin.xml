<idea-plugin>
    <id>com.zafrida.ui</id>
    <name>ZAFrida UI</name>
    <vendor email="dev@zafrida.local" url="https://github.com/yourname/zafrida-ui">ZAFrida</vendor>

    <description><![CDATA[
    <p><b>ZAFrida UI</b> is a Frida UI tool window for PyCharm / JetBrains IDEs.</p>
    <ul>
      <li>List devices via <code>frida-ls-devices</code></li>
      <li>List targets via <code>frida-ps</code></li>
      <li>Run/Stop <code>frida</code> with your existing frida tools</li>
      <li>JS templates managed by checkboxes (disable by comments, never delete)</li>
      <li>Console output + persistent .log file in project</li>
    </ul>
    ]]></description>

    <!-- Target PyCharm / Python IDEs -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.python</depends>

    <!-- Extension points defined by the plugin -->
    <extensions defaultExtensionNs="com.intellij">

        <toolWindow
                id="ZAFrida"
                anchor="right"
                factoryClass="com.zafrida.ui.toolwindow.ZaFridaToolWindowFactory"
                icon="META-INF/pluginIcon.svg"/>

        <notificationGroup id="ZAFrida" displayType="BALLOON" isLogByDefault="true"/>

        <applicationService serviceImplementation="com.zafrida.ui.settings.ZaFridaSettingsService"/>
        <applicationService serviceImplementation="com.zafrida.ui.frida.FridaCliService"/>
        <applicationService serviceImplementation="com.zafrida.ui.adb.AdbService"/>
        <applicationService serviceImplementation="com.zafrida.ui.diagnostics.ZaFridaDiagnosticsService"/>
        <projectService serviceImplementation="com.zafrida.ui.templates.ZaFridaTemplateService"/>
        <projectService serviceImplementation="com.zafrida.ui.session.ZaFridaSessionService"/>

        <applicationConfigurable
                id="com.zafrida.ui.settings"
                displayName="ZAFrida"
                instance="com.zafrida.ui.settings.ZaFridaSettingsConfigurable"/>

        <projectService serviceImplementation="com.zafrida.ui.fridaproject.ZaFridaProjectManager"/>


    </extensions>

    <actions>
        <action id="ZAFrida.NewProject"
                class="com.zafrida.ui.fridaproject.actions.NewZaFridaProjectAction"
                text="New Frida Project"
                description="Create a new ZAFrida project in the IDE root">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="ZAFrida.SelectProjectFromFolder"
                class="com.zafrida.ui.fridaproject.actions.SelectZaFridaProjectFromFolderAction"
                text="Select Frida Project"
                description="Select the folder as current ZAFrida project">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="ZAFrida.LoadProjectFromFolder"
                class="com.zafrida.ui.fridaproject.actions.LoadZaFridaProjectFromFolderAction"
                text="Load Frida Project"
                description="Load selected folder into ZAFrida workspace">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <action id="ZAFrida.RunFridaJs"
                class="com.zafrida.ui.editor.actions.RunFridaJsAction"
                text="Run Frida JS"
                description="Run current JS script with ZAFrida"
                icon="META-INF/icons/run-frida.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="control alt S"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta alt S"/>
        </action>
        <action id="ZAFrida.AttachFridaJs"
                class="com.zafrida.ui.editor.actions.AttachFridaJsAction"
                text="Attach Frida JS"
                description="Attach current JS script with ZAFrida"
                icon="META-INF/icons/run-frida.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="ZAFrida.RunFridaJs"/>
        </action>

        <group id="ZAFrida.EditorSnippets"
               text="ZAFrida Frida Snippets"
               description="Insert common Frida commands into the editor popup">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>

            <action id="ZAFrida.InsertJavaPerform"
                    class="com.zafrida.ui.editor.actions.InsertJavaPerformAction"
                    text="Frida: Java.perform block"/>
            <action id="ZAFrida.InsertJavaHookMethod"
                    class="com.zafrida.ui.editor.actions.InsertJavaHookMethodAction"
                    text="Frida: hook Java method"/>
            <action id="ZAFrida.InsertInterceptorAttach"
                    class="com.zafrida.ui.editor.actions.InsertInterceptorAttachAction"
                    text="Frida: Interceptor.attach"/>
            <action id="ZAFrida.InsertEnumerateModules"
                    class="com.zafrida.ui.editor.actions.InsertEnumerateModulesAction"
                    text="Frida: enumerate modules"/>
            <action id="ZAFrida.InsertSendLog"
                    class="com.zafrida.ui.editor.actions.InsertSendLogAction"
                    text="Frida: send log message"/>
        </group>
    </actions>
</idea-plugin>
